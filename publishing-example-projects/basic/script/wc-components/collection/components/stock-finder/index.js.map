{"version":3,"file":"index.js","sourceRoot":"","sources":["../../../src/components/stock-finder/index.tsx"],"names":[],"mappings":"AAAA,OAAO,EAAE,SAAS,EAAE,KAAK,EAAgB,KAAK,EAAE,CAAC,EAAE,MAAM,eAAe,CAAC;AAEzE,OAAO,EAAE,UAAU,EAAE,MAAM,qBAAqB,CAAC;AAOjD,MAAM,OAAO,WAAW;;yBAIwC,EAAE;mBAClC,KAAK;;EAIjC,YAAY,CAAC,CAAQ;IACjB,CAAC,CAAC,cAAc,EAAE,CAAC;IACnB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;IACpB,MAAM,SAAS,GAAG,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC;IAC5C,KAAK,CAAC,qEAAqE,SAAS,WAAW,UAAU,EAAE,CAAC;OAC3G,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC;OACvB,IAAI,CAAC,GAAG,CAAC,EAAE;MACR,0BAA0B;MAC1B,IAAI,CAAC,aAAa,GAAG,GAAG,CAAC,WAAW,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE;QAC3C,OAAO,EAAC,IAAI,EAAE,GAAG,CAAC,SAAS,CAAC,EAAE,MAAM,EAAE,GAAG,CAAC,WAAW,CAAC,EAAC,CAAC;MAC5D,CAAC,CAAC,CAAC;MACH,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;IACzB,CAAC,CAAC;OACD,KAAK,CAAC,GAAG,CAAC,EAAE;MACT,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;MACnB,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;IACzB,CAAC,CAAC,CAAA;EACN,CAAC;EAED,cAAc,CAAC,MAAc;IACzB,sBAAsB;IACtB,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;EACvC,CAAC;EAED,MAAM;IACF,IAAI,OAAO,GAAG,cACL,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,CAC1B,UAAI,OAAO,EAAE,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,EAAE,GAAG,CAAC,MAAM,CAAC;MAAE,kBAAS,GAAG,CAAC,MAAM,CAAU;;MAAI,GAAG,CAAC,IAAI,CAAM,CAC3G,CACA,CAAC;IACV,IAAI,IAAI,CAAC,OAAO;MAAE,OAAO,GAAG,qBAAyB,CAAC;IAEtD,OAAO;MACH,YAAM,QAAQ,EAAE,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC;QACxC,aAAO,EAAE,EAAC,cAAc,EAAC,IAAI,EAAC,MAAM,EAAC,GAAG,EAAE,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,cAAc,GAAG,EAAE,GAAI;QAC5E,cAAQ,IAAI,EAAC,QAAQ,YAAgB,CAClC;MACP,OAAO;KACV,CAAC;EACN,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CACJ","sourcesContent":["import { Component, Event, EventEmitter, State, h } from \"@stencil/core\";\r\n\r\nimport { AV_API_KEY } from '../../global/global';\r\n\r\n@Component({\r\n    tag: 'wc-stock-finder',\r\n    styleUrl: './index.css',\r\n    shadow: true,\r\n})\r\nexport class StockFinder {\r\n\r\n    stockNameInput: HTMLInputElement;\r\n\r\n    @State() searchResults: { symbol: string, name: string}[] = [];\r\n    @State() loading: boolean = false;\r\n\r\n    @Event({bubbles: true, composed: true }) wcSymbolSelected: EventEmitter<string>;\r\n\r\n    onFindStocks(e: Event) {\r\n        e.preventDefault();\r\n        this.loading = true;\r\n        const stockName = this.stockNameInput.value;\r\n        fetch(`https://www.alphavantage.co/query?function=SYMBOL_SEARCH&keywords=${stockName}&apikey=${AV_API_KEY}`)\r\n        .then(res => res.json())\r\n        .then(res => {\r\n            // console.log('res', res)\r\n            this.searchResults = res.bestMatches.map(row => {\r\n                return {name: row['2. name'], symbol: row['1. symbol']};\r\n            });\r\n            this.loading = false;\r\n        })\r\n        .catch(err => {\r\n            console.error(err);\r\n            this.loading = false;\r\n        })\r\n    }\r\n\r\n    onSelectSymbol(symbol: string) {\r\n        // console.log(symbol)\r\n        this.wcSymbolSelected.emit(symbol);\r\n    }\r\n\r\n    render() {\r\n        let content = <ul>\r\n                {this.searchResults.map(row =>\r\n                    <li onClick={this.onSelectSymbol.bind(this, row.symbol)}><strong>{row.symbol}</strong> - {row.name}</li>\r\n                )}\r\n            </ul>;\r\n        if (this.loading) content = <wc-spinner></wc-spinner>;\r\n        \r\n        return [\r\n            <form onSubmit={this.onFindStocks.bind(this)}>\r\n                <input id=\"stock-symbol\" type=\"text\" ref={el => this.stockNameInput = el} />\r\n                <button type=\"submit\" >Find!</button>\r\n            </form>,\r\n            content\r\n        ];\r\n    }\r\n}"]}