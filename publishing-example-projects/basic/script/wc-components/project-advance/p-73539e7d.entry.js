import{r as t,h as i,c as o,g as r,H as e}from"./p-b7f2e2ed.js";const n=".lds-ring{display:inline-block;position:relative;width:80px;height:80px}.lds-ring div{box-sizing:border-box;display:block;position:absolute;width:64px;height:64px;margin:8px;border:8px solid #3b013b;border-radius:50%;animation:lds-ring 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;border-color:#3b013b transparent transparent transparent}.lds-ring div:nth-child(1){animation-delay:-0.45s}.lds-ring div:nth-child(2){animation-delay:-0.3s}.lds-ring div:nth-child(3){animation-delay:-0.15s}@keyframes lds-ring{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}";const s=class{constructor(i){t(this,i)}render(){return i("div",{class:"lds-ring"},i("div",null),i("div",null),i("div",null),i("div",null))}};s.style=n;const l="32VATWT27K56Q99T";const c=":host{font-family:sans-serif;border:2px solid #3b013b;margin:2rem;padding:1rem;display:block;width:20rem;max-width:100%}form input{font:inherit;color:#3b013b;padding:0.1rem 0.25rem;margin-bottom:0.5rem}form input:focus,form form input:focus:focus{outline:none}form button{font:inherit;padding:0.25rem 0.5rem;border:1px solid #3b013b;background:#3b013b;color:white;cursor:pointer}form button:hover,form button:active{background:#750175;border-color:#750175}form button:disabled{background:#ccc;border:#ccc;color:white;cursor:not-allowed}ul{margin:0;list-style:none}li{margin:0.25rem 0;padding:0.25rem;border:1px solid #ccc;cursor:pointer}li:hover,li:active{background:var(--color-primary, black);color:var(--color-primary-inverse, white)}";const a=class{constructor(i){t(this,i);this.wcSymbolSelected=o(this,"wcSymbolSelected",7);this.searchResults=[];this.loading=false}onFindStocks(t){t.preventDefault();this.loading=true;const i=this.stockNameInput.value;fetch(`https://www.alphavantage.co/query?function=SYMBOL_SEARCH&keywords=${i}&apikey=${l}`).then((t=>t.json())).then((t=>{this.searchResults=t.bestMatches.map((t=>({name:t["2. name"],symbol:t["1. symbol"]})));this.loading=false})).catch((t=>{console.error(t);this.loading=false}))}onSelectSymbol(t){this.wcSymbolSelected.emit(t)}render(){let t=i("ul",null,this.searchResults.map((t=>i("li",{onClick:this.onSelectSymbol.bind(this,t.symbol)},i("strong",null,t.symbol)," - ",t.name))));if(this.loading)t=i("wc-spinner",null);return[i("form",{onSubmit:this.onFindStocks.bind(this)},i("input",{id:"stock-symbol",type:"text",ref:t=>this.stockNameInput=t}),i("button",{type:"submit"},"Find!")),t]}};a.style=c;const d=":host{font-family:sans-serif;border:2px solid var(--color-primary, black);margin:2rem;padding:1rem;display:block;width:20rem;max-width:100%}:host(.error){border-color:rgb(235, 153, 0)}form input{font:inherit;color:var(--color-primary, black);padding:0.1rem 0.25rem;margin-bottom:0.5rem}form input:focus,form form input:focus:focus{outline:none}form button{font:inherit;padding:0.25rem 0.5rem;border:1px solid var(--color-primary, black);background:var(--color-primary, black);color:var(--color-primary-inverse, white);cursor:pointer}form button:hover,form button:active{background:var(--color-primary-highlight, grey);border-color:var(--color-primary-highlight, grey)}form button:disabled{background:#ccc;border:#ccc;color:white;cursor:not-allowed}";const h=class{constructor(i){t(this,i);this.fetchedPrice=undefined;this.stockUserInput=undefined;this.stockInputValid=false;this.error=undefined;this.loading=false;this.stockSymbol=undefined}stockSymbolChanged(t,i){if(t!=i){this.stockUserInput=t;this.stockInputValid=true;this.fetchStockPrice(t)}}onUserInput(t){this.stockUserInput=t.target.value;this.stockInputValid=this.stockUserInput.trim()!==""}onFecthStockPrice(t){t.preventDefault();this.stockSymbol=this.stockInput.value}componentWillLoad(){console.log("componentWillLoad",this.stockSymbol);this.fetchedPrice=0}componentDidLoad(){console.log("componentDidLoad");if(this.stockSymbol){this.stockUserInput=this.stockSymbol;this.stockInputValid=true;this.fetchStockPrice(this.stockSymbol)}}componentWillUpdate(){console.log("componentWillUpdate")}componentDidUpdate(){console.log("componentDidUpdate")}disconnectedCallback(){console.log("disconnectedCallback")}onStockSymbolSelected(t){if(t.detail&&t.detail!==this.stockSymbol){this.stockSymbol=t.detail}}fetchStockPrice(t){this.loading=true;fetch(`https://www.alphavantage.co/query?function=GLOBAL_QUOTE&symbol=${t}&apikey=${l}`).then((t=>{if(t.status!==200)throw new Error("Invalid!");return t.json()})).then((t=>{if(!t["Global Quote"]["05. price"])throw new Error("Invalid Symbol!!");this.error="";this.fetchedPrice=+t["Global Quote"]["05. price"];this.loading=false})).catch((t=>{this.error=t.message;this.fetchedPrice=null;this.loading=false}))}hostData(){return{class:this.error?"error hydrated":"hydrated"}}__stencil_render(){let t=i("p",null,"Please enter a symbol");if(this.error)t=i("p",null,this.error);if(this.fetchedPrice)t=i("p",null,"Price: $",this.fetchedPrice);if(this.loading)t=i("wc-spinner",null);return[i("form",{onSubmit:this.onFecthStockPrice.bind(this)},i("input",{id:"stock-symbol",type:"text",ref:t=>this.stockInput=t,value:this.stockUserInput,onInput:this.onUserInput.bind(this)}),i("button",{type:"submit",disabled:!this.stockInputValid||this.loading},"Fetch")),i("div",null,t)]}get el(){return r(this)}static get watchers(){return{stockSymbol:["stockSymbolChanged"]}}render(){return i(e,this.hostData(),this.__stencil_render())}};h.style=d;export{s as wc_spinner,a as wc_stock_finder,h as wc_stock_price};
//# sourceMappingURL=p-73539e7d.entry.js.map